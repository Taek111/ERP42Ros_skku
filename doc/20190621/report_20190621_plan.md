# Report 20190621 plan

- 작성자 : 가태권
- 작성일시 : 2019-06-21

# 실험 목표
- ERP42위에 UPPER 컨트롤러로 쓰일  Jetson TX2를 부착하고 전원과 변압기를 통해 전원을 연결하여  제대로 작동하는지 확인한다. 
- Jetson TX2와 PCU를 연결하고 ERP42Ros 노드를 실행하여 UPPER와 PCU간 RS232통신을 확인한다. 
- Auto mode를 구동함에 있어서 의도치 않은 에러가 있는지 확인한다. 
# 실험 방법
1. ERP42에 Jetson TX2가 부착된 거치대를 설치한다. 이 때 거치대가 흔들리지 않도록 볼트 너트의 체결상태를 꼼꼼히 확인한다. 
1. 무선 조종기의 전원을 완전히 충전한다.
1. 전 후방의 리프트 높이를 일치시키며 모든 바퀴가 바닥에서 충분히 떨어질 때 까지 조금씩 상승시킨다.
1. ERP42가 안정적으로 리프트업 되었는지 확인한다.
1. 무선 조종기의 전원을 켠다.
1. 무선조종기의 기어 스위치를 중립으로 한다.
1. 무선 조종기의 브레이크를 30~50% 정도 잡는다.
1. ERP42의 전원을 켜고 무선 조종기와 연결되었는지 확인한다.
1. E-stop 조작을 하여 정상작동하는지 확인한다. (E-stop은 1분이상 연속 작동하지 않는것이 규정이므로 유의한다.)

1. Jetson TX2의 전원을 연결하고 USB-to-RS232 케이블을 이용해 PCU와 연결한다. (메인스위치 패널에서 전원아래 있는 포트가  CAN Port이고, CAN PORT아래에 있는 포트가 RS232 Port이다.)
1. ERP42의 조작 모드를 Auto 모드로 바꾸고, Jetson TX2에서 ERP42Ros를 실행시킨다. (무선조종기 좌측 상단 기어 위에 있는 토글스위치가 Auto/Manual 스위치 인데, 이 스위치를 아래로 내리면 ERP42가 Auto 모드로 동작한다.)
1. ERP42가 정지한 상태에서 PCU와 UPPER 컨트롤러가 제대로 통신하는지 확인한다. (steer 중립(0), speed 0, brake 30%(60), E-stop false(0)인  상태로 진행한다.) 통신 확인을 위해 PCU와 UPPER 컨트롤러 간의 패킷을 로그로 기록한다.
1. 무선조종기로 ERP42를 다시 Manual 모드로 바꾸고  정지한 상태에서 그대로 ERP42의 전원을 끈다.
1. 전 후방 리프트 높이를 일치시키며 리프트를 서서히 하강시켜 바퀴가 모두 바닥에 닿을 때 까지 하강한다.
1. ERP42가 앞뒤로 움직이지 않는 것을 확인한 후 리프트를 최저점까지 하강시켜 ERP42 하부에서 제거한다.
1. 무선조종기를 끄고 정리한다.
1. 앞선 실험에서 기록한 로그를 분석한다. 패킷의 ALIVE값을 확인하여 먼저 한번에 1씩 증가하는지 확인하고, 통신주기가 50Hz인 것을 확인하기 위해 timestamp값이 1 증가할 때마다 ALIVE값이 약 50 정도 증가하는지  확인한다. 마지막으로 양방향의 통신 중 패킷 손실은 없는지 확인하기 위해 ALIVE 값이 불연속적으로 증가하는 부분을 찾는다.  






